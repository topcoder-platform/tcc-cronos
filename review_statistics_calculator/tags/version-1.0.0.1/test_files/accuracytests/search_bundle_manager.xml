<?xml version="1.0"?>
<CMConfig>
    <Config name="com.topcoder.search.builder.SearchBundleManager">
        <Property name="searchStrategyFactoryNamespace">
            <Value>com.topcoder.search.builder.strategy.factory</Value>
        </Property>
        <Property name="fieldValidatorFactoryNamespace">
            <Value>com.topcoder.search.builder.validator.factory</Value>
        </Property>
        <Property name="searchBundles">
            <Property name="Resource Search Bundle">
                <Property name="searchStrategy">
                    <Property name="class">
                        <Value>dbStrategy</Value>
                    </Property>
                </Property>
                <Property name="context"> 
                    <Value>SELECT DISTINCT resource.resource_id AS resource_id,
                        resource_role_id,
                        project_id,
                        project_phase_id,
                        resource.create_user AS create_user,
                        resource.create_date AS create_date,
                        resource.modify_user AS modify_user,
                        resource.modify_date AS modify_date,
                        resource_info_type_lu.name AS name,
                        resource_info.value AS value
                        FROM resource,
                        resource_info,
                        resource_info_type_lu,
                        OUTER resource_submission
                        WHERE resource.resource_id = resource_info.resource_id
                        AND resource_info.resource_info_type_id = resource_info_type_lu.resource_info_type_id
                        AND resource.resource_id = resource_submission.resource_id
                        AND
                    </Value> 
                </Property> 
                <Property name="searchableFields">
                    <Property name="name">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>notnull</Value>
                            </Property>
                        </Property>
                    </Property>
                    <Property name="value">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>notnull</Value>
                            </Property>
                        </Property>
                    </Property>
                    <Property name="project_phase_id">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>notnull</Value>
                            </Property>
                        </Property>
                    </Property>
                    <Property name="resource_id">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>notnull</Value>
                            </Property>
                        </Property>
                    </Property>
                    <Property name="resource_role_id">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>notnull</Value>
                            </Property>
                        </Property>
                    </Property>
                </Property>
            </Property>

            <Property name="Resource Role Search Bundle">
                <Property name="searchStrategy">
                    <Property name="class">
                        <Value>dbStrategy</Value>
                    </Property>
                </Property>
                <Property name="context"> 
                    <Value>SELECT resource_role_id FROM resource_role_lu WHERE</Value> 
                </Property> 
                <Property name="searchableFields">
                    <Property name="resource_role_id">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>notnull</Value>
                            </Property>
                        </Property>
                    </Property>
                </Property>
            </Property>

            <Property name="Notification Search Bundle">
                <Property name="searchStrategy">
                    <Property name="class">
                        <Value>dbStrategy</Value>
                    </Property>
                </Property>
                <Property name="context"> 
                    <Value>SELECT external_ref_id, project_id, notification_type_id FROM notification WHERE</Value> 
                </Property> 
                <Property name="searchableFields">
                    <Property name="external_ref_id">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>notnull</Value>
                            </Property>
                        </Property>
                    </Property>
                </Property>
            </Property>

            <Property name="Notification Type Search Bundle">
                <Property name="searchStrategy">
                    <Property name="class">
                        <Value>dbStrategy</Value>
                    </Property>
                </Property>
                <Property name="context"> 
                    <Value>SELECT notification_type_id FROM notification_type_lu WHERE</Value> 
                </Property> 
                <Property name="searchableFields">
                    <Property name="notification_type_id">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>notnull</Value>
                            </Property>
                        </Property>
                    </Property>
                </Property>
            </Property>

            <Property name="Deliverable Search Bundle">
                <Property name="searchStrategy">
                    <Property name="class">
                        <Value>dbStrategy</Value>
                    </Property>
                </Property>
                <Property name="context">
                    <Value>
                        SELECT UNIQUE deliverable_id,
                        resource_id,
                        project_phase.project_phase_id
                        FROM deliverable_lu,
                        resource,
                        project_phase
                        WHERE deliverable_lu.resource_role_id = resource.resource_role_id
                        AND deliverable_lu.phase_type_id = project_phase.phase_type_id
                        AND resource.project_id = project_phase.project_id
                        AND
                    </Value>
                </Property>

                <Property name="searchableFields">
                    <Property name="project_id">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>notnull</Value>
                            </Property>
                        </Property>
                    </Property>
                    <Property name="phase_id">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>notnull</Value>
                            </Property>
                        </Property>
                    </Property>
                    <Property name="resource_id">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>notnull</Value>
                            </Property>
                        </Property>
                    </Property>
                </Property>
                <Property name="alias">
                    <Property name="deliverable_id">
                        <Value>deliverable_lu.deliverable_id</Value>
                    </Property>
                    <Property name="name">
                        <Value>deliverable_lu.name</Value>
                    </Property>
                    <Property name="project_id">
                        <Value>resource.project_id</Value>
                    </Property>
                    <Property name="phase_id">
                        <Value>project_phase.project_phase_id</Value>
                    </Property>
                    <Property name="resource_id">
                        <Value>resource.resource_id</Value>
                    </Property>
                    <Property name="required">
                        <Value>deliverable_lu.required</Value>
                    </Property>
                </Property>
            </Property>

            <Property name="Deliverable With Submission Search Bundle">
                <Property name="searchStrategy">
                    <Property name="class">
                        <Value>dbStrategy</Value>
                    </Property>
                </Property>
                <Property name="context">
                    <Value>
                        SELECT     deliverable_id,
                        resource.resource_id,
                        project_phase.project_phase_id,
                        submission_id
                        FROM deliverable_lu,
                        resource,
                        project_phase
                        CROSS JOIN submission
                        INNER JOIN submission_status_lu
                        ON submission.submission_status_id = submission_status_lu.submission_status_id
                        INNER JOIN upload
                        ON submission.upload_id = upload.upload_id
                        WHERE submission_status_lu.name = 'Active'
                        AND deliverable_lu.per_submission = 1
                        AND upload.project_id = resource.project_id
                        AND deliverable_lu.resource_role_id = resource.resource_role_id
                        AND deliverable_lu.phase_type_id = project_phase.phase_type_id
                        AND
                    </Value>
                </Property>
                <Property name="searchableFields">
                    <Property name="dummy">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>null</Value>
                            </Property>
                        </Property>
                    </Property>
                </Property>
                <Property name="alias">
                    <Property name="deliverable_id">
                        <Value>deliverable_lu.deliverable_id</Value>
                    </Property>
                    <Property name="name">
                        <Value>deliverable_lu.name</Value>
                    </Property>
                    <Property name="project_id">
                        <Value>resource.project_id</Value>
                    </Property>
                    <Property name="phase_id">
                        <Value>project_phase.project_phase_id</Value>
                    </Property>
                    <Property name="resource_id">
                        <Value>resource.resource_id</Value>
                    </Property>
                    <Property name="required">
                        <Value>deliverable_lu.required</Value>
                    </Property>
                    <Property name="submission_id">
                        <Value>submission.submission_id</Value>
                    </Property>
                </Property>
            </Property>

            <Property name="Submission Search Bundle">
                <Property name="searchStrategy">
                    <Property name="class">
                        <Value>dbStrategy</Value>
                    </Property>
                </Property>
                <Property name="context">
                    <Value>SELECT submission_id
                        FROM submission
                        INNER JOIN upload
                        ON submission.upload_id = upload.upload_id
                        WHERE
                    </Value>
                </Property>
                <Property name="searchableFields">
                    <Property name="dummy">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>null</Value>
                            </Property>
                        </Property>
                    </Property>
                </Property>
                <Property name="alias">
                    <Property name="submission_id">
                        <Value>submission.submission_id</Value>
                    </Property>
                    <Property name="upload_id">
                        <Value>submission.upload_id</Value>
                    </Property>
                    <Property name="submission_status_id">
                        <Value>submission.submission_status_id</Value>
                    </Property>
                    <Property name="submission_type_id">
                        <Value>submission.submission_type_id</Value>
                    </Property>
                    <Property name="project_id">
                        <Value>upload.project_id</Value>
                    </Property>
                    <Property name="resource_id">
                        <Value>upload.resource_id</Value>
                    </Property>
                </Property>
            </Property>

            <Property name="Upload Search Bundle">
                <Property name="searchStrategy">
                    <Property name="class">
                        <Value>dbStrategy</Value>
                    </Property>
                </Property>
                <Property name="context">
                    <Value>SELECT upload_id
                        FROM upload
                        WHERE
                    </Value>
                </Property>
                <Property name="searchableFields">
                    <Property name="dummy">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>null</Value>
                            </Property>
                        </Property>
                    </Property>
                </Property>
                <Property name="alias">
                    <Property name="upload_id">
                        <Value>upload.upload_id</Value>
                    </Property>
                    <Property name="upload_type_id">
                        <Value>upload.upload_type_id</Value>
                    </Property>
                    <Property name="upload_status_id">
                        <Value>upload.upload_status_id</Value>
                    </Property>
                    <Property name="project_id">
                        <Value>upload.project_id</Value>
                    </Property>
                    <Property name="resource_id">
                        <Value>upload.resource_id</Value>
                    </Property>
                </Property>
            </Property>

            <Property name="ProjectSearchBundle">
                <Property name="searchStrategy">
                    <Property name="class">
                        <Value>dbStrategy</Value>
                    </Property>
                </Property>
                <Property name="context">
                    <Value>SELECT DISTINCT project.project_id FROM project
                        JOIN project_category_lu ON 
                        project.project_category_id = project_category_lu.project_category_id
                        JOIN project_status_lu ON 
                        project.project_status_id = project_status_lu.project_status_id
                        JOIN project_type_lu ON
                        project_category_lu.project_type_id = project_type_lu.project_type_id
                        LEFT JOIN project_info ON
                        project.project_id = project_info.project_id
                        LEFT JOIN project_info_type_lu ON
                        project_info.project_info_type_id = project_info_type_lu.project_info_type_id 
                        LEFT JOIN resource ON
                        project.project_id=resource.project_id
                        LEFT JOIN resource_info ON
                        resource.resource_id = resource_info.resource_id
                        LEFT JOIN resource_info_type_lu ON
                        resource_info.resource_info_type_id = 
                        resource_info_type_lu.resource_info_type_id WHERE</Value>
                </Property>
                <Property name="searchableFields">
                    <Property name="dummy">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>null</Value>
                            </Property>
                        </Property>
                    </Property>
                </Property>
                <Property name="alias">
                    <Property name="ProjectTypeID">
                        <Value>project_type_lu.project_type_id</Value>
                    </Property>
                    <Property name="ProjectTypeName">
                        <Value>project_type_lu.name</Value>
                    </Property>
                    <Property name="ProjectCategoryID">
                        <Value>project_category_lu.project_category_id</Value>
                    </Property>
                    <Property name="ProjectCategoryName">
                        <Value>project_category_lu.name</Value>
                    </Property>
                    <Property name="ProjectStatusID">
                        <Value>project_status_lu.project_status_id</Value>
                    </Property>
                    <Property name="ProjectStatusName">
                        <Value>project_status_lu.name</Value>
                    </Property>
                    <Property name="ProjectPropertyName">
                        <Value>project_info_type_lu.name</Value>
                    </Property>
                    <Property name="ProjectPropertyValue">
                        <Value>project_info.value</Value>
                    </Property>
                    <Property name="ProjectResourcePropertyName">
                        <Value>resource_info_type_lu.name</Value>
                    </Property>
                    <Property name="ProjectResourcePropertyValue">
                        <Value>resource_info.value</Value>
                    </Property>
                </Property>
            </Property>
        </Property>
    </Config>

    <Config name="com.topcoder.search.builder.validator.factory">
        <Property name="validator:null">
            <Property name="type">
                <Value>com.topcoder.util.datavalidator.NullValidator</Value>
            </Property>
        </Property>
        <Property name="validator:notnull">
            <Property name="type">
                <Value>com.topcoder.util.datavalidator.NotValidator</Value>
            </Property>
            <Property name="params">
                <Property name="param1">
                    <Property name="name">
                        <Value>validator:null</Value>
                    </Property>
                </Property>
            </Property>
        </Property>
    </Config>
    <Config name="com.topcoder.search.builder.strategy.factory">
        <Property name="dbStrategy">
            <Property name="type">
                <Value>com.topcoder.search.builder.database.DatabaseSearchStrategy</Value>
            </Property>
            <Property name="params">
                <Property name="param1">
                    <Property name="type">
                        <Value>String</Value>
                    </Property>
                    <Property name="value">
                        <Value>DBSearchStrategy</Value>
                    </Property>
                </Property>
            </Property>
        </Property>
    </Config>

    <Config name="DBSearchStrategy">
        <Property name="connectionFactory">
            <Property name="name">
                <Value>com.topcoder.db.connectionfactory.DBConnectionFactoryImpl</Value>
            </Property>
            <Property name="class">
                <Value>com.topcoder.db.connectionfactory.DBConnectionFactoryImpl</Value>
            </Property>
        </Property>

        <Property name="connectionName">
            <Value>dbconnection</Value>
        </Property>

        <Property name="searchFragmentFactoryNamespace">
            <Value>com.topcoder.search.builder.database.factory</Value>
        </Property>

        <Property name="searchFragmentBuilders">
            <Property name="first">
                <Property name="targetFilter">
                    <Value>com.topcoder.search.builder.filter.AndFilter</Value>
                </Property>
                <Property name="className">
                    <Value>com.topcoder.search.builder.database.AndFragmentBuilder</Value>
                </Property>
            </Property>

            <Property name="second">
                <Property name="targetFilter">
                    <Value>com.topcoder.search.builder.filter.OrFilter</Value>
                </Property>
                <Property name="className">
                    <Value>com.topcoder.search.builder.database.OrFragmentBuilder</Value>
                </Property>
            </Property>

            <Property name="third">
                <Property name="targetFilter">
                    <Value>com.topcoder.search.builder.filter.LikeFilter</Value>
                </Property>
                <Property name="className">
                    <Value>com.topcoder.search.builder.database.LikeFragmentBuilder</Value>
                </Property>
            </Property>

            <Property name="fourth">
                <Property name="targetFilter">
                    <Value>com.topcoder.search.builder.filter.NotFilter</Value>
                </Property>
                <Property name="className">
                    <Value>com.topcoder.search.builder.database.NotFragmentBuilder</Value>
                </Property>
            </Property>

            <Property name="fifth">
                <Property name="targetFilter">
                    <Value>com.topcoder.search.builder.filter.EqualToFilter</Value>
                </Property>
                <Property name="className">
                    <Value>com.topcoder.search.builder.database.EqualsFragmentBuilder</Value>
                </Property>
            </Property>

            <Property name="sixth">
                <Property name="targetFilter">
                    <Value>com.topcoder.search.builder.filter.InFilter</Value>
                </Property>
                <Property name="className">
                    <Value>com.topcoder.search.builder.database.InFragmentBuilder</Value>
                </Property>
            </Property>

            <Property name="eighth">
                <Property name="targetFilter">
                    <Value>com.topcoder.search.builder.filter.NullFilter</Value>
                </Property>
                <Property name="className">
                    <Value>com.topcoder.search.builder.database.NullFragmentBuilder</Value>
                </Property>
            </Property>

            <Property name="ninth">
                <Property name="targetFilter">
                    <Value>com.topcoder.search.builder.filter.GreaterThanFilter</Value>
                </Property>
                <Property name="className">
                    <Value>com.topcoder.search.builder.database.RangeFragmentBuilder</Value>
                </Property>
            </Property>

            <Property name="tenth">
                <Property name="targetFilter">
                    <Value>com.topcoder.search.builder.filter.GreaterThanOrEqualToFilter</Value>
                </Property>
                <Property name="className">
                    <Value>com.topcoder.search.builder.database.RangeFragmentBuilder</Value>
                </Property>
            </Property>

            <Property name="eleventh">
                <Property name="targetFilter">
                    <Value>com.topcoder.search.builder.filter.BetweenFilter</Value>
                </Property>
                <Property name="className">
                    <Value>com.topcoder.search.builder.database.RangeFragmentBuilder</Value>
                </Property>
            </Property>

            <Property name="twelvth">
                <Property name="targetFilter">
                    <Value>com.topcoder.search.builder.filter.LessThanOrEqualToFilter</Value>
                </Property>
                <Property name="className">
                    <Value>com.topcoder.search.builder.database.RangeFragmentBuilder</Value>
                </Property>
            </Property>

            <Property name="thirteenth">
                <Property name="targetFilter">
                    <Value>com.topcoder.search.builder.filter.LessThanFilter</Value>
                </Property>
                <Property name="className">
                    <Value>com.topcoder.search.builder.database.RangeFragmentBuilder</Value>
                </Property>
            </Property>
        </Property>
    </Config>
    <Config name="com.topcoder.search.builder.database.factory" /> 
</CMConfig>
