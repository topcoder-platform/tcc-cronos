<?xml version="1.0" ?>
<CMConfig>
	<Config name="com.topcoder.timetracker.contact.persistence.SearchBundleManager">

        <Property name="searchStrategyFactoryNamespace">
		    <Value>com.topcoder.search.builder.strategy.factory</Value>
 	    </Property>
	    <Property name="fieldValidatorFactoryNamespace">
		    <Value>com.topcoder.search.builder.validator.factory</Value>
		</Property>

		<Property name="searchBundles">
			<Property name="AddressSearch">
				<Property name="searchStrategy">
					<Property name="class">
						<Value>dbStrategy</Value>
					</Property>
				</Property>
				<Property name="context">
					<Value>
					select 
						a.address_id,
						a.line1,
						a.line2,
						a.city,
						a.zip_code,
						a.creation_date,
						a.creation_user,
						a.modification_date,
						a.modification_user,
						
						ar.address_type_id,
						
						a.state_name_id,
						sn.name as state_name,
						sn.abbreviation,
						sn.creation_date as sn_creation_date,
						sn.creation_user as sn_creation_user,
						sn.modification_date as sn_modification_date,
						sn.modification_user as sn_modification_user,
					
						a.country_name_id,
						cn.name as country_name,
						cn.creation_date as cn_creation_date,
						cn.creation_user as cn_creation_user,
						cn.modification_date as cn_modification_date,
						cn.modification_user as cn_modification_user
					
					from address a 
					join state_name sn on a.state_name_id = sn.state_name_id 
					join country_name cn on a.country_name_id = cn.country_name_id 
					left join address_relation ar on a.address_id = ar.address_id where
					</Value>
				</Property>
			    <Property name="alias">
        	      <Property name="address_id">
						<Value>a.address_id</Value>
	 			  </Property>
        	      <Property name="line1">
						<Value>a.line1</Value>
	 			  </Property>
        	      <Property name="line2">
						<Value>a.line2</Value>
	 			  </Property>
        	      <Property name="city">
						<Value>a.city</Value>
	 			  </Property>
        	      <Property name="state_name_id">
						<Value>a.state_name_id</Value>
	 			  </Property>
        	      <Property name="country_name_id">
						<Value>a.country_name_id</Value>
	 			  </Property>
        	      <Property name="zip_code">
						<Value>a.zip_code</Value>
	 			  </Property>
        	      <Property name="creation_date">
						<Value>a.creation_date</Value>
	 			  </Property>
        	      <Property name="creation_user">
						<Value>a.creation_user</Value>
	 			  </Property>
        	      <Property name="modification_date">
						<Value>a.modification_date</Value>
	 			  </Property>
        	      <Property name="modification_user">
						<Value>a.modification_user</Value>
	 			  </Property>
        	      <Property name="state_name">
						<Value>sn.name</Value>
	 			  </Property>
        	      <Property name="abbreviation">
						<Value>sn.abbreviation</Value>
	 			  </Property>
        	      <Property name="country_name">
						<Value>sn.name</Value>
	 			  </Property>
        	      <Property name="entity_id">
						<Value>ar.entity_id</Value>
	 			  </Property>
        	      <Property name="address_type_id">
						<Value>ar.address_type_id</Value>
	 			  </Property>
            	</Property>
				
				<Property name="searchableFields">
        	      <Property name="address_id">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
        	      <Property name="line1">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
        	      <Property name="line2">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
        	      <Property name="city">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
        	      <Property name="state_name_id">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
        	      <Property name="country_name_id">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
        	      <Property name="zip_code">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
        	      <Property name="creation_date">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
        	      <Property name="creation_user">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
        	      <Property name="modification_date">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
        	      <Property name="modification_user">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
        	      <Property name="state_name">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
        	      <Property name="abbreviation">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
        	      <Property name="country_name">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
        	      <Property name="entity_id">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
        	      <Property name="address_type_id">
            	        <Property name="validator">
            	            <Property name="class">
            	                <Value>validator</Value>
            	            </Property>
            	            <Property name="identifier">
            	                <Value>default</Value>
            	            </Property>
            	        </Property>
	 			  </Property>
				</Property>
			</Property>
			
			<Property name="ContactSearch">
				<Property name="searchStrategy">
					<Property name="class">
						<Value>dbStrategy</Value>
					</Property>
				</Property>
				<Property name="context">
					<Value>Select contact.*,contact_relation.contact_type_id,
contact_relation.entity_id, contact_relation.creation_date as relation_creation_date,
contact_relation.modification_date as relation_modification_date,
contact_relation.creation_user as relation_creation_user,
contact_relation.modification_user as relation_modification_user from contact left join contact_relation
on contact.contact_id = contact_relation.contact_id where </Value>
				</Property>
				
				<Property name="alias">
					<Property name="creation_date">
						<Value>contact.creation_date</Value>
					</Property>
					<Property name="modification_date">
						<Value>contact.modification_date</Value>
					</Property>
					<Property name="creation_user">
						<Value>contact.creation_user</Value>
					</Property>
					<Property name="modification_user">
						<Value>contact.modification_user</Value>
					</Property>
				</Property>
				
				<Property name="searchableFields">
					<Property name="creation_date">
		                <Property name="validator">
		                    <Property name="class">
		                        <Value>validator</Value>
		                    </Property>
		                    <Property name="identifier">
		                        <Value>default</Value>
		                    </Property>
		                </Property>
		            </Property>
		            <Property name="modification_date">
		                <Property name="validator">
		                    <Property name="class">
		                        <Value>validator</Value>
		                    </Property>
		                    <Property name="identifier">
		                        <Value>default</Value>
		                    </Property>
		                </Property>
		            </Property>
		            <Property name="creation_user">
		                <Property name="validator">
		                    <Property name="class">
		                        <Value>validator</Value>
		                    </Property>
		                    <Property name="identifier">
		                        <Value>default</Value>
		                    </Property>
		                </Property>
		            </Property>
		            <Property name="modification_user">
		                <Property name="validator">
		                    <Property name="class">
		                        <Value>validator</Value>
		                    </Property>
		                    <Property name="identifier">
		                        <Value>default</Value>
		                    </Property>
		                </Property>
		            </Property>
		            <Property name="first_name">
		                <Property name="validator">
		                    <Property name="class">
		                        <Value>validator</Value>
		                    </Property>
		                    <Property name="identifier">
		                        <Value>default</Value>
		                    </Property>
		                </Property>
		            </Property>
		            <Property name="last_name">
		                <Property name="validator">
		                    <Property name="class">
		                        <Value>validator</Value>
		                    </Property>
		                    <Property name="identifier">
		                        <Value>default</Value>
		                    </Property>
		                </Property>
		            </Property>
		            <Property name="phone">
		                <Property name="validator">
		                    <Property name="class">
		                        <Value>validator</Value>
		                    </Property>
		                    <Property name="identifier">
		                        <Value>default</Value>
		                    </Property>
		                </Property>
		            </Property>
		            <Property name="email">
		                <Property name="validator">
		                    <Property name="class">
		                        <Value>validator</Value>
		                    </Property>
		                    <Property name="identifier">
		                        <Value>default</Value>
		                    </Property>
		                </Property>
		            </Property>
		            <Property name="contact_type_id">
		                <Property name="validator">
		                    <Property name="class">
		                        <Value>validator</Value>
		                    </Property>
		                    <Property name="identifier">
		                        <Value>default</Value>
		                    </Property>
		                </Property>
		            </Property>
		            <Property name="entity_id">
		                <Property name="validator">
		                    <Property name="class">
		                        <Value>validator</Value>
		                    </Property>
		                    <Property name="identifier">
		                        <Value>default</Value>
		                    </Property>
		                </Property>
		            </Property>
				</Property>
			</Property>
		</Property>
	</Config>

	<Config name="com.topcoder.search.builder.strategy.factory">
		<Property name="dbStrategy">
			<Property name="type">
				<Value>com.topcoder.search.builder.database.DatabaseSearchStrategy</Value>
			</Property>
			<Property name="params">
				<Property name="param1">
					<Property name="type">
						<Value>String</Value>
					</Property>
					<Property name="value">
						<Value>com.topcoder.search.builder.database.DatabaseSearchStrategy</Value>
					</Property>
				</Property>
			</Property>
		</Property>
	</Config>
	
  <Config name="com.topcoder.search.builder.validator.factory">
      <Property name="validator:default">
          <Property name="type">
            <Value>com.topcoder.timetracker.contact.failuretests.MockAlwaysTrueValidator</Value>
          </Property>
      </Property>
  </Config>
  
  <Config name="com.topcoder.search.builder.database.DatabaseSearchStrategy">
	
		<!-- Property defining a specification for constructing the dbConnectionFactory to use. -->
		<Property name="connectionFactory">

			<!-- The namespace of the ConnectionFactory -->
			<Property name="name">
				<Value>com.topcoder.db.connectionfactory.DBConnectionFactoryImpl</Value>
			</Property>
			<Property name="class">
				<Value>com.topcoder.db.connectionfactory.DBConnectionFactoryImpl</Value>
			</Property>
		</Property>


		<!-- 
			The name to request from the connection factory when acquiring a connection. If not present, then the default connection is used. 
		-->
		<Property name="connectionName">
			<Value>informix</Value>
		</Property>


		<Property name="searchFragmentFactoryNamespace">
			<Value>com.topcoder.search.builder.database.factory</Value>
		</Property>

		<Property name="searchFragmentBuilders">
			<Property name="first">
				<Property name="targetFilter">
					<Value>com.topcoder.search.builder.filter.AndFilter</Value>
				</Property>
				<Property name="className">
					<Value>com.topcoder.search.builder.database.AndFragmentBuilder</Value>
				</Property>
			</Property>

			<Property name="second">
				<Property name="targetFilter">
					<Value>com.topcoder.search.builder.filter.OrFilter</Value>
				</Property>
				<Property name="className">
					<Value>com.topcoder.search.builder.database.OrFragmentBuilder</Value>
				</Property>
			</Property>

			<Property name="third">
				<Property name="targetFilter">
					<Value>com.topcoder.search.builder.filter.LikeFilter</Value>
				</Property>
				<Property name="className">
					<Value>com.topcoder.search.builder.database.LikeFragmentBuilder</Value>
				</Property>
			</Property>

			<Property name="fourth">
				<Property name="targetFilter">
					<Value>com.topcoder.search.builder.filter.NotFilter</Value>
				</Property>
				<Property name="className">
					<Value>com.topcoder.search.builder.database.NotFragmentBuilder</Value>
				</Property>
			</Property>

			<Property name="fifth">
				<Property name="targetFilter">
					<Value>com.topcoder.search.builder.filter.EqualToFilter</Value>
				</Property>
				<Property name="className">
					<Value>com.topcoder.search.builder.database.EqualsFragmentBuilder</Value>
				</Property>
			</Property>

			<Property name="sixth">
				<Property name="targetFilter">
					<Value>com.topcoder.search.builder.filter.InFilter</Value>
				</Property>
				<Property name="className">
					<Value>com.topcoder.search.builder.database.InFragmentBuilder</Value>
				</Property>
			</Property>

			<Property name="eighth">
				<Property name="targetFilter">
					<Value>com.topcoder.search.builder.filter.NullFilter</Value>
				</Property>
				<Property name="className">
					<Value>com.topcoder.search.builder.database.NullFragmentBuilder</Value>
				</Property>
			</Property>

			<Property name="ninth">
				<Property name="targetFilter">
					<Value>com.topcoder.search.builder.filter.GreaterThanFilter</Value>
				</Property>
				<Property name="className">
					<Value>com.topcoder.search.builder.database.RangeFragmentBuilder</Value>
				</Property>
			</Property>

			<Property name="tenth">
				<Property name="targetFilter">
					<Value>com.topcoder.search.builder.filter.GreaterThanOrEqualToFilter</Value>
				</Property>
				<Property name="className">
					<Value>com.topcoder.search.builder.database.RangeFragmentBuilder</Value>
				</Property>
			</Property>

			<Property name="eleventh">
				<Property name="targetFilter">
					<Value>com.topcoder.search.builder.filter.BetweenFilter</Value>
				</Property>
				<Property name="className">
					<Value>com.topcoder.search.builder.database.RangeFragmentBuilder</Value>
				</Property>
			</Property>

			<Property name="twelvth">
				<Property name="targetFilter">
					<Value>com.topcoder.search.builder.filter.LessThanOrEqualToFilter</Value>
				</Property>
				<Property name="className">
					<Value>com.topcoder.search.builder.database.RangeFragmentBuilder</Value>
				</Property>
			</Property>

			<Property name="thirteenth">
				<Property name="targetFilter">
					<Value>com.topcoder.search.builder.filter.LessThanFilter</Value>
				</Property>
				<Property name="className">
					<Value>com.topcoder.search.builder.database.RangeFragmentBuilder</Value>
				</Property>
			</Property>
		</Property>
	</Config>
	<Config name="com.topcoder.search.builder.database.factory">
	</Config>
</CMConfig>