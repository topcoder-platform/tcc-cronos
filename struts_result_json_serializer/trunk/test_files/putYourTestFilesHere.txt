Implementation Details
 *     The result data Object (which is a java bean) will be serialized to JSON
 *     1. String jsonReturnString;
 *     2. check for special case: if(data instanceOf Exception){
 *     2.1    create the error data: String error = ((Exception)data).getMessage();
 *     2.2    create JSON string for exception using the jsonErrorTamplate:
 *     2.1.1    jsonReturnString = <replace "${error}" token with error data>
 *     3. } else{ // end special case
 *     3.1    get the serialized data: JSON json = JSONSerializer.toJSON( data );
 *     3.2    get the string representation: String jsonString = json.toString();
 *     3.3    create JSON string for result using the jsonResultTamplate:
 *     2.1.1    jsonReturnString = <replace "${result}" token with jsonString data>
 *     4. }
 *     // we post process the generated string to substitutie any other tokens in the
 *     // template
 *     5. for each(tokenName in formatData keys){
 *     5.1    get the data for tokenName: String data = formatData.get(tokenName);
 *     5.2    Replace the ${tokenName} in teh jsonReturnString with data;
 *     6. }
 *     7. Do the same replacement for the ${action} token with actionName data;
 *     // we are done
 *     8. return jsonReturnString;