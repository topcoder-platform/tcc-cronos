*********************
README for 1.1
*********************
IMPORTANT: algorithm change/improvement
========================================
It has made a lot of improvement on original design, see posts:

http://forums.topcoder.com/?module=Thread&threadID=613082&start=0
It uses existing proven database sql builders from SB component. It also will faciliate the future upgrade to have more robust/flexible search filter framework. A new database search stragegy can be done more easier using current codebase.

http://forums.topcoder.com/?module=Thread&threadID=613081&start=0
It simplifies custom filters and make the final SQL search sql statement more efficient and robust.

see codes for detals. Enjoy:)

Some Fixes/changes
======================
1. A schema_fix.sql is included in test_files/sql. It is fixing a problem when a xref record can not be inserted due to not-null create_date column. It gives a default value.
2. Filter class SHOULD be Serializable since it is used in EJB call parameter.
   A fix build has been done and put test_files/lib
   PLEASE use search_builder.jar especially if you want to try on EJB demo.

Database Script/setup
===============================
The target database is informix 10/11 so informix is used throughout the development/test to be more accurate.
   all sql scripts are under test_files/sql. You should rebuild or clean up scheam before running tests/demo:
   mysql create script is still attached but it is not supported for above reason. you can look at informix scripts for any necessary change.
   
   Be sure to run as: 

   schema_drop.sql
   create.sql
   create_seq.sql
   schema_create.sql
   schema_fix.sql

Unit Test
===========
1. before running unit tests, be sure to change test_files/hibernate.cfg.xml to your own db settings.
Demo
============
1. Demo jar has been moved to directory ejbdemo/ContestManager.jar. 
   Previously it is zipped under test_files and it is not convinient for modification/test. Also due to mapping file duplication problem (since test_files is in classpath). it is better to put in seperate folder.   
2. Demo is using informix JTA datasource, the general process to set it up is:   
   1. copy ifxjdbc.jar in jboss lib folder
   2. deploy datasource into jboss using test_files/informix-ds.xml after modification to your own settings
   3. configure ejbdemo/ContestManager.jar/META-INF/persistence.xml if necessary (usually not)
   4. deploy ContestManager.jar into jboss (simply copy it into jboss deploy foler).
3. change jndi.properties if necessary  (usually not)
3. Demo class for 1.1 is at com.topcoder.service.studio.contest.DemoEJB. Run it against deployed EJB.
   note: it also has previous 1.0 demo codes and previous one has been removed as it seperates from main test codes.
   


*******************************************************************************************************
Previous ReadMe 1.0

note for 1.1:
demo currently is changed to under directory ejbdemo to avoid mapping file duplication in classpath.
you can directly copy ContestManager.jar into deploy directory after modification to your environment.
*******************************************************************************************************
Before run the unit test, please set up the database first.
  1.1 If you use Informix, please use the schema_create.sql and create.sql. 
  If you use mysql, please use contest_mysql.sql. All of these scripts are 
  under test_files directory.
  1.2 Modifiy the test_files/hibernate.cfg.xml to your environment.
  1.3 all mappings are put under test_files/mappings, they can be auto detected by persistence of hibernate.
  1.4 we need to deploy ContestManager.jar.rar under test_files/demo to run accuracy tests and stress tests and demo.
      unzip the ContestManager.jar.rar, and then copy it to the jboss delopy directory. Then configure the datasource.
      Also, copy mysql-ds.xml or informix-ds.xml to deploy directory. Start jboss.
  1.5 A demo is provided in test_files/demo. run the demo/ejbtest. 
  1.6 refer the included build.xml for necessary libraries
  
Thanks  
