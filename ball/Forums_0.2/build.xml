<?xml version="1.0"?>

<project name="Orpheus Game Server" default="dist" basedir=".">

    <property file="topcoder_global.properties"/>

    <!-- COMPONENT PARAMETERS -->
    <property name="component" value="orpheus_game_server"/>
    <property name="package" value="com.orpheus.game"/>
    <property name="packagedir" value="com/orpheus/game"/>
    <property name="distfilename" value="game_server"/>
    <property name="component_version" value="1.0"/>
    <property name="component_path" value="${distfilename}/${component_version}"/>

    <!-- DIRECTORY SETUP -->
    <property name="srcdir" value="src"/>
	<property name="tc_libdir" value="lib/tc"/>
    <property name="tcs_libdir" value="lib/tcs"/>
    <property name="ext_libdir" value="lib/third_party"/>
	<property name="jive_libdir" value="${ext_libdir}/jive/4.2.5"/>
    <property name="docsdir" value="docs"/>
    <property name="configdir" value="conf"/>
    <property name="testlogdir" value="log"/>
    <property name="testfiles" value="test_files"/>
    <property name="javadocsdir" value="${docsdir}/javadocs"/>
    <property name="webdir" value="web"/>
    <property name="reports" value="reports"/>

    <property name="javasrc" value="${srcdir}/java"/>
    <property name="javamain" value="${javasrc}/main"/>
    <property name="javatests" value="${javasrc}/tests"/>
    <property name="sqlsrc" value="${srcdir}/sql"/>

    <property name="builddir" value="build/ant"/>
    <property name="build_classdir" value="${builddir}/classes"/>
    <property name="build_testclassdir" value="${builddir}/testClasses"/>
    <property name="build_targetclassdir" value="${builddir}/targetclasses"/>
    <property name="build_distdir" value="${builddir}/dist"/>
    <property name="build_docsdir" value="${builddir}/${docsdir}"/>
    <property name="build_javadocsdir" value="${builddir}/${javadocsdir}"/>
    <property name="build_webdir" value="${builddir}/${webdir}"/>
    <property name="build_lib" value="${builddir}/lib"/>
    <property name="build_tcsdistdir" value="${build_distdir}/${distfilename}-${component_version}"/>
	<property name="build_ejbjarsdir" value="${builddir}/ejb_jars"/>

    <!-- Server installation directories -->
    <property name="jboss.home" value="C:/java/servers/jboss-4.0.4GA"/>
    <property name="jboss_deploy" value="${jboss.home}/server/default/deploy"/>
	<property name="jboss_lib" value="${jboss.home}/server/default/lib"/>
	<property name="jboss_conf" value="${jboss.home}/server/default/conf"/>
    <property name="global_conf_dir" value="c:/orpheus"/>

    <!-- EXECUTION TAGS -->
    <property name="debug" value="off"/>
    <property name="verbose" value="no"/>

    <!-- COMPONENT DISTRIBUTION STRUCTURE -->
    <property name="dist_conf" value="${build_tcsdistdir}/${configdir}"/>
    <property name="dist_lib" value="${build_distdir}/lib/tcs"/>
    <property name="dist_src" value="${build_tcsdistdir}/${srcdir}"/>
    <property name="dist_docs" value="${build_tcsdistdir}/${docsdir}"/>
    <property name="dist_javadocs" value="${build_tcsdistdir}/${javadocsdir}"/>
    <property name="dist_testfiles" value="${build_tcsdistdir}/${testfiles}"/>

    <!-- NAME FOR .JAR AND .WAR FILES -->
    <property name="component.jar" value="${dist_lib}/${component_path}/${distfilename}.jar"/>
    <property name="javadoc.jar" value="${builddir}/javadocs.jar"/>
    <property name="component.tests.jar" value="${dist_lib}/${distfilename}_tests.jar"/>
    <property name="component.war" value="${build_distdir}/${distfilename}.war"/>
	<property name="forums.war" value="${build_distdir}/forums.war"/>
    <property name="component.ear" value="${build_distdir}/${distfilename}.ear"/>

    <!-- TCS Dependencies -->
    <property name="authorization.version" value="2.1.1"/>
    <property name="authorization.jar.name" value="authorization.jar"/>
    <property name="authorization.path" value="authorization/${authorization.version}"/>
    <property name="authorization.jar" value="${tcs_libdir}/${authorization.path}/${authorization.jar.name}"/>

    <property name="administration_logic.version" value="1.0"/>
    <property name="administration_logic.jar.name" value="administration_logic.jar"/>
    <property name="administration_logic.path" value="administration_logic/${administration_logic.version}"/>
    <property name="administration_logic.jar" value="${tcs_libdir}/${administration_logic.path}/${administration_logic.jar.name}"/>

    <property name="administration_persistence.version" value="1.0"/>
    <property name="administration_persistence.jar.name" value="administration_persistence.jar"/>
    <property name="administration_persistence.path" value="administration_persistence/${administration_persistence.version}"/>
    <property name="administration_persistence.jar" value="${tcs_libdir}/${administration_persistence.path}/${administration_persistence.jar.name}"/>

    <property name="auction_framework.version" value="1.0"/>
    <property name="auction_framework.jar.name" value="auction_framework.jar"/>
    <property name="auction_framework.path" value="auction_framework/${auction_framework.version}"/>
    <property name="auction_framework.jar" value="${tcs_libdir}/${auction_framework.path}/${auction_framework.jar.name}"/>

    <property name="auction_persistence.version" value="1.0"/>
    <property name="auction_persistence.jar.name" value="auction_persistence.jar"/>
    <property name="auction_persistence.path" value="auction_persistence/${auction_persistence.version}"/>
    <property name="auction_persistence.jar" value="${tcs_libdir}/${auction_persistence.path}/${auction_persistence.jar.name}"/>

    <property name="auction_logic.version" value="1.0"/>
    <property name="auction_logic.jar.name" value="auction_logic.jar"/>
    <property name="auction_logic.path" value="auction_logic/${auction_logic.version}"/>
    <property name="auction_logic.jar" value="${tcs_libdir}/${auction_logic.path}/${auction_logic.jar.name}"/>

    <property name="base_exception.version" value="1.0"/>
    <property name="base_exception.jar.name" value="base_exception.jar"/>
    <property name="base_exception.path" value="base_exception/${base_exception.version}"/>
    <property name="base_exception.jar" value="${tcs_libdir}/${base_exception.path}/${base_exception.jar.name}"/>

    <property name="base64_codec.version" value="1.0"/>
    <property name="base64_codec.jar.name" value="base64_codec.jar"/>
    <property name="base64_codec.path" value="base64_codec/${base64_codec.version}"/>
    <property name="base64_codec.jar" value="${tcs_libdir}/${base64_codec.path}/${base64_codec.jar.name}"/>

    <property name="bloom_filter.version" value="1.1"/>
    <property name="bloom_filter.jar.name" value="bloom_filter.jar"/>
    <property name="bloom_filter.path" value="bloom_filter/${bloom_filter.version}"/>
    <property name="bloom_filter.jar" value="${tcs_libdir}/${bloom_filter.path}/${bloom_filter.jar.name}"/>

    <property name="class_associations.version" value="1.0"/>
    <property name="class_associations.jar.name" value="class_associations.jar"/>
    <property name="class_associations.path" value="class_associations/${class_associations.version}"/>
    <property name="class_associations.jar"
              value="${tcs_libdir}/${class_associations.path}/${class_associations.jar.name}"/>

    <property name="command_line_utility.version" value="1.0"/>
    <property name="command_line_utility.jar.name" value="command_line_utility.jar"/>
    <property name="command_line_utility.path" value="command_line_utility/${command_line_utility.version}"/>
    <property name="command_line_utility.jar"
              value="${tcs_libdir}/${command_line_utility.path}/${command_line_utility.jar.name}"/>

    <property name="compression_utility.version" value="2.0.1"/>
    <property name="compression_utility.jar.name" value="compression_utility.jar"/>
    <property name="compression_utility.path" value="compression_utility/${compression_utility.version}"/>
    <property name="compression_utility.jar"
              value="${tcs_libdir}/${compression_utility.path}/${compression_utility.jar.name}"/>
	
    <property name="configuration_manager.version" value="2.1.5"/>
    <property name="configuration_manager.jar.name" value="configuration_manager.jar"/>
    <property name="configuration_manager.path" value="configuration_manager/${configuration_manager.version}"/>
    <property name="configuration_manager.jar"
              value="${tcs_libdir}/${configuration_manager.path}/${configuration_manager.jar.name}"/>

    <property name="credit_card_validation.version" value="1.0"/>
    <property name="credit_card_validation.jar.name" value="credit_card_validation.jar"/>
    <property name="credit_card_validation.path" value="credit_card_validation/${credit_card_validation.version}"/>
    <property name="credit_card_validation.jar"
              value="${tcs_libdir}/${credit_card_validation.path}/${credit_card_validation.jar.name}"/>

    <property name="data_validation.version" value="1.0"/>
    <property name="data_validation.jar.name" value="data_validation.jar"/>
    <property name="data_validation.path" value="data_validation/${data_validation.version}"/>
    <property name="data_validation.jar" value="${tcs_libdir}/${data_validation.path}/${data_validation.jar.name}"/>

    <property name="db_connection_factory.version" value="1.0"/>
    <property name="db_connection_factory.jar.name" value="db_connection_factory.jar"/>
    <property name="db_connection_factory.path" value="db_connection_factory/${db_connection_factory.version}"/>
    <property name="db_connection_factory.jar"
              value="${tcs_libdir}/${db_connection_factory.path}/${db_connection_factory.jar.name}"/>

    <property name="database_abstraction.version" value="1.1"/>
    <property name="database_abstraction.jar.name" value="database_abstraction.jar"/>
    <property name="database_abstraction.path" value="database_abstraction/${database_abstraction.version}"/>
    <property name="database_abstraction.jar"
              value="${tcs_libdir}/${database_abstraction.path}/${database_abstraction.jar.name}"/>

    <property name="document_generator.version" value="2.0"/>
    <property name="document_generator.jar.name" value="document_generator.jar"/>
    <property name="document_generator.path" value="document_generator/${document_generator.version}"/>
    <property name="document_generator.jar"
              value="${tcs_libdir}/${document_generator.path}/${document_generator.jar.name}"/>

    <property name="data_paging_tag.version" value="2.2"/>
    <property name="data_paging_tag.jar.name" value="data_paging_tag.jar"/>
    <property name="data_paging_tag.path" value="data_paging_tag/${data_paging_tag.version}"/>
    <property name="data_paging_tag.jar"
              value="${tcs_libdir}/${data_paging_tag.path}/${data_paging_tag.jar.name}"/>

    <property name="drop_down_manager.version" value="1.0"/>
    <property name="drop_down_manager.jar.name" value="drop_down_manager.jar"/>
    <property name="drop_down_manager.path" value="drop_down_manager/${drop_down_manager.version}"/>
    <property name="drop_down_manager.jar"
              value="${tcs_libdir}/${drop_down_manager.path}/${drop_down_manager.jar.name}"/>

    <property name="email_address_validator.version" value="1.1"/>
    <property name="email_address_validator.jar.name" value="email_address_validator.jar"/>
    <property name="email_address_validator.path" value="email_address_validator/${email_address_validator.version}"/>
    <property name="email_address_validator.jar"
              value="${tcs_libdir}/${email_address_validator.path}/${email_address_validator.jar.name}"/>

    <property name="email_confirmation.version" value="1.1"/>
    <property name="email_confirmation.jar.name" value="email_confirmation.jar"/>
    <property name="email_confirmation.path" value="email_confirmation/${email_confirmation.version}"/>
    <property name="email_confirmation.jar"
              value="${tcs_libdir}/${email_confirmation.path}/${email_confirmation.jar.name}"/>

    <property name="email_engine.version" value="3.0"/>
    <property name="email_engine.jar.name" value="email_engine.jar"/>
    <property name="email_engine.path" value="email_engine/${email_engine.version}"/>
    <property name="email_engine.jar" value="${tcs_libdir}/${email_engine.path}/${email_engine.jar.name}"/>

    <property name="encryption.version" value="1.0.1"/>
    <property name="encryption.jar.name" value="encryption.jar"/>
    <property name="encryption.path" value="encryption/${encryption.version}"/>
    <property name="encryption.jar" value="${tcs_libdir}/${encryption.path}/${encryption.jar.name}"/>

	<property name="file_system_server.version" value="1.0"/>
	<property name="file_system_server.jar.name" value="file_system_server.jar"/>
	<property name="file_system_server.path" value="file_system_server/${file_system_server.version}"/>
	<property name="file_system_server.jar" value="${tcs_libdir}/${file_system_server.path}/${file_system_server.jar.name}"/>
	
    <property name="file_upload.version" value="2.0"/>
    <property name="file_upload.jar.name" value="file_upload.jar"/>
    <property name="file_upload.path" value="file_upload/${file_upload.version}"/>
    <property name="file_upload.jar" value="${tcs_libdir}/${file_upload.path}/${file_upload.jar.name}"/>

    <property name="form_validator.version" value="1.0"/>
    <property name="form_validator.jar.name" value="form_validator.jar"/>
    <property name="form_validator.path" value="form_validator/${form_validator.version}"/>
    <property name="form_validator.jar" value="${tcs_libdir}/${form_validator.path}/${form_validator.jar.name}"/>

    <property name="front_controller.version" value="2.1"/>
    <property name="front_controller.jar.name" value="front_controller.jar"/>
    <property name="front_controller.path" value="front_controller/${front_controller.version}"/>
    <property name="front_controller.jar" value="${tcs_libdir}/${front_controller.path}/${front_controller.jar.name}"/>

    <property name="forgot_password.version" value="1.1"/>
    <property name="forgot_password.jar.name" value="forgot_password.jar"/>
    <property name="forgot_password.path" value="forgot_password/${forgot_password.version}"/>
    <property name="forgot_password.jar" value="${tcs_libdir}/${forgot_password.path}/${forgot_password.jar.name}"/>

    <property name="game_handlers_logic.version" value="1.0"/>
    <property name="game_handlers_logic.jar.name" value="game_handlers_logic.jar"/>
    <property name="game_handlers_logic.path" value="game_handlers_logic/${game_handlers_logic.version}"/>
    <property name="game_handlers_logic.jar"
              value="${tcs_libdir}/${game_handlers_logic.path}/${game_handlers_logic.jar.name}"/>

    <property name="game_interface_logic.version" value="1.0"/>
    <property name="game_interface_logic.jar.name" value="game_interface_logic.jar"/>
    <property name="game_interface_logic.path" value="game_interface_logic/${game_interface_logic.version}"/>
    <property name="game_interface_logic.jar"
              value="${tcs_libdir}/${game_interface_logic.path}/${game_interface_logic.jar.name}"/>

    <property name="game_operation_logic.version" value="1.0"/>
    <property name="game_operation_logic.jar.name" value="game_operation_logic.jar"/>
    <property name="game_operation_logic.path" value="game_operation_logic/${game_operation_logic.version}"/>
    <property name="game_operation_logic.jar"
              value="${tcs_libdir}/${game_operation_logic.path}/${game_operation_logic.jar.name}"/>

    <property name="game_persistence.version" value="1.0"/>
    <property name="game_persistence.jar.name" value="game_persistence.jar"/>
    <property name="game_persistence.path" value="game_persistence/${game_persistence.version}"/>
    <property name="game_persistence.jar"
              value="${tcs_libdir}/${game_persistence.path}/${game_persistence.jar.name}"/>

    <property name="generic_event_manager.version" value="1.0"/>
    <property name="generic_event_manager.jar.name" value="generic_event_manager.jar"/>
    <property name="generic_event_manager.path" value="generic_event_manager/${generic_event_manager.version}"/>
    <property name="generic_event_manager.jar"
              value="${tcs_libdir}/${generic_event_manager.path}/${generic_event_manager.jar.name}"/>

    <property name="guid_generator.version" value="1.0"/>
    <property name="guid_generator.jar.name" value="guid_generator.jar"/>
    <property name="guid_generator.path" value="guid_generator/${guid_generator.version}"/>
    <property name="guid_generator.jar" value="${tcs_libdir}/${guid_generator.path}/${guid_generator.jar.name}"/>

    <property name="hashing_utility.version" value="1.0"/>
    <property name="hashing_utility.jar.name" value="hashing_utility.jar"/>
    <property name="hashing_utility.path" value="hashing_utility/${hashing_utility.version}"/>
    <property name="hashing_utility.jar" value="${tcs_libdir}/${hashing_utility.path}/${hashing_utility.jar.name}"/>
	
	<property name="heartbeat.version" value="1.0"/>
	<property name="heartbeat.jar.name" value="heartbeat.jar"/>
	<property name="heartbeat.path" value="heartbeat/${heartbeat.version}"/>
	<property name="heartbeat.jar" value="${tcs_libdir}/${heartbeat.path}/${heartbeat.jar.name}"/>
	
    <property name="html_parser.version" value="1.0"/>
    <property name="html_parser.jar.name" value="html_parser.jar"/>
    <property name="html_parser.path" value="html_parser/${html_parser.version}"/>
    <property name="html_parser.jar" value="${tcs_libdir}/${html_parser.path}/${html_parser.jar.name}"/>
	
    <property name="http_utility.version" value="1.1"/>
    <property name="http_utility.jar.name" value="http_utility.jar"/>
    <property name="http_utility.path" value="http_utility/${http_utility.version}"/>
    <property name="http_utility.jar" value="${tcs_libdir}/${http_utility.path}/${http_utility.jar.name}"/>

    <property name="id_generator.version" value="3.0"/>
    <property name="id_generator.jar.name" value="id_generator.jar"/>
    <property name="id_generator.path" value="id_generator/${id_generator.version}"/>
    <property name="id_generator.jar" value="${tcs_libdir}/${id_generator.path}/${id_generator.jar.name}"/>

    <property name="image_manipulation.version" value="1.0"/>
    <property name="image_manipulation.jar.name" value="image_manipulation.jar"/>
    <property name="image_manipulation.path" value="image_manipulation/${image_manipulation.version}"/>
    <property name="image_manipulation.jar"
              value="${tcs_libdir}/${image_manipulation.path}/${image_manipulation.jar.name}"/>
	
	<property name="ip_server.version" value="2.0.1"/>
    <property name="ip_server.jar.name" value="ip_server.jar"/>
    <property name="ip_server.path" value="ip_server/${ip_server.version}"/>
    <property name="ip_server.jar" value="${tcs_libdir}/${ip_server.path}/${ip_server.jar.name}"/>

    <property name="jndi_utility.version" value="1.0"/>
    <property name="jndi_utility.jar.name" value="jndi_utility.jar"/>
    <property name="jndi_utility.path" value="jndi_utility/${jndi_utility.version}"/>
    <property name="jndi_utility.jar" value="${tcs_libdir}/${jndi_utility.path}/${jndi_utility.jar.name}"/>

    <property name="jigsaw_puzzle.version" value="1.0"/>
    <property name="jigsaw_puzzle.jar.name" value="jigsaw_puzzle.jar"/>
    <property name="jigsaw_puzzle.path" value="jigsaw_puzzle/${jigsaw_puzzle.version}"/>
    <property name="jigsaw_puzzle.jar" value="${tcs_libdir}/${jigsaw_puzzle.path}/${jigsaw_puzzle.jar.name}"/>

    <property name="json_object.version" value="1.0"/>
    <property name="json_object.jar.name" value="json_object.jar"/>
    <property name="json_object.path" value="json_object/${json_object.version}"/>
    <property name="json_object.jar" value="${tcs_libdir}/${json_object.path}/${json_object.jar.name}"/>

    <property name="letter_scramble_puzzle.version" value="1.0"/>
    <property name="letter_scramble_puzzle.jar.name" value="letter_scramble_puzzle.jar"/>
    <property name="letter_scramble_puzzle.path" value="letter_scramble_puzzle/${letter_scramble_puzzle.version}"/>
    <property name="letter_scramble_puzzle.jar"
              value="${tcs_libdir}/${letter_scramble_puzzle.path}/${letter_scramble_puzzle.jar.name}"/>

    <property name="lightweight_xml_parser.version" value="1.1"/>
    <property name="lightweight_xml_parser.jar.name" value="lightweight_xml_parser.jar"/>
    <property name="lightweight_xml_parser.path" value="lightweight_xml_parser/${lightweight_xml_parser.version}"/>
    <property name="lightweight_xml_parser.jar" value="${tcs_libdir}/${lightweight_xml_parser.path}/${lightweight_xml_parser.jar.name}"/>

    <property name="logging_wrapper.version" value="1.2"/>
    <property name="logging_wrapper.jar.name" value="logging_wrapper.jar"/>
    <property name="logging_wrapper.path" value="logging_wrapper/${logging_wrapper.version}"/>
    <property name="logging_wrapper.jar" value="${tcs_libdir}/${logging_wrapper.path}/${logging_wrapper.jar.name}"/>

    <property name="memory_usage.version" value="2.0"/>
    <property name="memory_usage.jar.name" value="memory_usage.jar"/>
    <property name="memory_usage.path" value="memory_usage/${memory_usage.version}"/>
    <property name="memory_usage.jar" value="${tcs_libdir}/${memory_usage.path}/${memory_usage.jar.name}"/>

    <property name="messenger_framework.version" value="1.0"/>
    <property name="messenger_framework.jar.name" value="messenger_framework.jar"/>
    <property name="messenger_framework.path" value="messenger_framework/${messenger_framework.version}"/>
    <property name="messenger_framework.jar"
              value="${tcs_libdir}/${messenger_framework.path}/${messenger_framework.jar.name}"/>

    <property name="missing_letter_puzzle.version" value="1.0"/>
    <property name="missing_letter_puzzle.jar.name" value="missing_letter_puzzle.jar"/>
    <property name="missing_letter_puzzle.path" value="missing_letter_puzzle/${missing_letter_puzzle.version}"/>
    <property name="missing_letter_puzzle.jar"
              value="${tcs_libdir}/${missing_letter_puzzle.path}/${missing_letter_puzzle.jar.name}"/>

    <property name="object_factory.version" value="2.0.1"/>
    <property name="object_factory.jar.name" value="object_factory.jar"/>
    <property name="object_factory.path" value="object_factory/${object_factory.version}"/>
    <property name="object_factory.jar" value="${tcs_libdir}/${object_factory.path}/${object_factory.jar.name}"/>

    <property name="object_formatter.version" value="1.0"/>
    <property name="object_formatter.jar.name" value="object_formatter.jar"/>
    <property name="object_formatter.path" value="object_formatter/${object_formatter.version}"/>
    <property name="object_formatter.jar" value="${tcs_libdir}/${object_formatter.path}/${object_formatter.jar.name}"/>

    <property name="password_validator.version" value="1.0"/>
    <property name="password_validator.jar.name" value="password_validator.jar"/>
    <property name="password_validator.path" value="password_validator/${password_validator.version}"/>
    <property name="password_validator.jar"
              value="${tcs_libdir}/${password_validator.path}/${password_validator.jar.name}"/>

    <property name="puzzle_framework.version" value="1.0"/>
    <property name="puzzle_framework.jar.name" value="puzzle_framework.jar"/>
    <property name="puzzle_framework.path" value="puzzle_framework/${puzzle_framework.version}"/>
    <property name="puzzle_framework.jar"
              value="${tcs_libdir}/${puzzle_framework.path}/${puzzle_framework.jar.name}"/>

    <property name="random_string_generator.version" value="1.0"/>
    <property name="random_string_generator.jar.name" value="random_string_generator.jar"/>
    <property name="random_string_generator.path" value="random_string_generator/${random_string_generator.version}"/>
    <property name="random_string_generator.jar"
              value="${tcs_libdir}/${random_string_generator.path}/${random_string_generator.jar.name}"/>

    <property name="random_string_image.version" value="1.0"/>
    <property name="random_string_image.jar.name" value="random_string_image.jar"/>
    <property name="random_string_image.path" value="random_string_image/${random_string_image.version}"/>
    <property name="random_string_image.jar"
              value="${tcs_libdir}/${random_string_image.path}/${random_string_image.jar.name}"/>

    <property name="rss_generator.version" value="2.0"/>
    <property name="rss_generator.jar.name" value="rss_generator.jar"/>
    <property name="rss_generator.path" value="rss_generator/${rss_generator.version}"/>
    <property name="rss_generator.jar"
              value="${tcs_libdir}/${rss_generator.path}/${rss_generator.jar.name}"/>

    <property name="registration_data_validation.version" value="1.0"/>
    <property name="registration_data_validation.jar.name" value="registration_data_validation.jar"/>
    <property name="registration_data_validation.path"
              value="registration_data_validation/${registration_data_validation.version}"/>
    <property name="registration_data_validation.jar"
              value="${tcs_libdir}/${registration_data_validation.path}/${registration_data_validation.jar.name}"/>

    <property name="rest_context_builder.version" value="1.0"/>
    <property name="rest_context_builder.jar.name" value="rest_context_builder.jar"/>
    <property name="rest_context_builder.path" value="rest_context_builder/${rest_context_builder.version}"/>
    <property name="rest_context_builder.jar"
              value="${tcs_libdir}/${rest_context_builder.path}/${rest_context_builder.jar.name}"/>

    <property name="rest_service.version" value="1.0"/>
    <property name="rest_service.jar.name" value="rest_service.jar"/>
    <property name="rest_service.path" value="rest_service/${rest_service.version}"/>
    <property name="rest_service.jar" value="${tcs_libdir}/${rest_service.path}/${rest_service.jar.name}"/>

    <property name="simple_cache.version" value="2.0.1"/>
    <property name="simple_cache.jar.name" value="simple_cache.jar"/>
    <property name="simple_cache.path" value="simple_cache/${simple_cache.version}"/>
    <property name="simple_cache.jar" value="${tcs_libdir}/${simple_cache.path}/${simple_cache.jar.name}"/>

    <property name="site_validation.version" value="1.0"/>
    <property name="site_validation.jar.name" value="site_validation.jar"/>
    <property name="site_validation.path" value="site_validation/${site_validation.version}"/>
    <property name="site_validation.jar" value="${tcs_libdir}/${site_validation.path}/${site_validation.jar.name}"/>

    <property name="sliding_tile_puzzle.version" value="1.0"/>
    <property name="sliding_tile_puzzle.jar.name" value="sliding_tile_puzzle.jar"/>
    <property name="sliding_tile_puzzle.path" value="sliding_tile_puzzle/${sliding_tile_puzzle.version}"/>
    <property name="sliding_tile_puzzle.jar"
              value="${tcs_libdir}/${sliding_tile_puzzle.path}/${sliding_tile_puzzle.jar.name}"/>

    <property name="spell_check.version" value="1.0"/>
    <property name="spell_check.jar.name" value="spell_check.jar"/>
    <property name="spell_check.path" value="spell_check/${spell_check.version}"/>
    <property name="spell_check.jar" value="${tcs_libdir}/${spell_check.path}/${spell_check.jar.name}"/>

    <property name="search_builder.version" value="1.3.1"/>
    <property name="search_builder.jar.name" value="search_builder.jar"/>
    <property name="search_builder.path" value="search_builder/${search_builder.version}"/>
    <property name="search_builder.jar" value="${tcs_libdir}/${search_builder.path}/${search_builder.jar.name}"/>

    <property name="string_class.version" value="1.0"/>
    <property name="string_class.jar.name" value="string_class.jar"/>
    <property name="string_class.path" value="string_class/${string_class.version}"/>
    <property name="string_class.jar" value="${tcs_libdir}/${string_class.path}/${string_class.jar.name}"/>
	
    <property name="string_distance.version" value="1.0"/>
    <property name="string_distance.jar.name" value="string_distance.jar"/>
    <property name="string_distance.path" value="string_distance/${string_distance.version}"/>
    <property name="string_distance.jar" value="${tcs_libdir}/${string_distance.path}/${string_distance.jar.name}"/>

    <property name="stoppable_thread.version" value="1.0"/>
    <property name="stoppable_thread.jar.name" value="stoppable_thread.jar"/>
    <property name="stoppable_thread.path" value="stoppable_thread/${stoppable_thread.version}"/>
    <property name="stoppable_thread.jar" value="${tcs_libdir}/${stoppable_thread.path}/${stoppable_thread.jar.name}"/>

    <property name="sync_proc_wrapper.version" value="1.0"/>
    <property name="sync_proc_wrapper.jar.name" value="sync_proc_wrapper.jar"/>
    <property name="sync_proc_wrapper.path" value="sync_proc_wrapper/${sync_proc_wrapper.version}"/>
    <property name="sync_proc_wrapper.jar" value="${tcs_libdir}/${sync_proc_wrapper.path}/${sync_proc_wrapper.jar.name}"/>
    
    <property name="typesafe_enum.version" value="1.0"/>
    <property name="typesafe_enum.jar.name" value="typesafe_enum.jar"/>
    <property name="typesafe_enum.path" value="typesafe_enum/${typesafe_enum.version}"/>
    <property name="typesafe_enum.jar" value="${tcs_libdir}/${typesafe_enum.path}/${typesafe_enum.jar.name}"/>

    <property name="url_loader.version" value="1.0"/>
    <property name="url_loader.jar.name" value="url_loader.jar"/>
    <property name="url_loader.path" value="url_loader/${url_loader.version}"/>
    <property name="url_loader.jar" value="${tcs_libdir}/${url_loader.path}/${url_loader.jar.name}"/>

    <property name="user_logic_persistence.version" value="1.0"/>
    <property name="user_logic_persistence.jar.name" value="user_logic_persistence.jar"/>
    <property name="user_logic_persistence.path" value="user_logic_persistence/${user_logic_persistence.version}"/>
    <property name="user_logic_persistence.jar"
              value="${tcs_libdir}/${user_logic_persistence.path}/${user_logic_persistence.jar.name}"/>

    <property name="user_profile.version" value="1.0"/>
    <property name="user_profile.jar.name" value="user_profile.jar"/>
    <property name="user_profile.path" value="user_profile/${user_profile.version}"/>
    <property name="user_profile.jar" value="${tcs_libdir}/${user_profile.path}/${user_profile.jar.name}"/>

    <property name="user_profile_manager.version" value="1.0"/>
    <property name="user_profile_manager.jar.name" value="user_profile_manager.jar"/>
    <property name="user_profile_manager.path" value="user_profile_manager/${user_profile_manager.version}"/>
    <property name="user_profile_manager.jar"
              value="${tcs_libdir}/${user_profile_manager.path}/${user_profile_manager.jar.name}"/>

    <property name="web_application_user_logic.version" value="1.0"/>
    <property name="web_application_user_logic.jar.name" value="web_application_user_logic.jar"/>
    <property name="web_application_user_logic.path"
              value="web_application_user_logic/${web_application_user_logic.version}"/>
    <property name="web_application_user_logic.jar"
              value="${tcs_libdir}/${web_application_user_logic.path}/${web_application_user_logic.jar.name}"/>

    <property name="web_registration.version" value="1.2"/>
    <property name="web_registration.jar.name" value="web_registration.jar"/>
    <property name="web_registration.path"
              value="web_registration/${web_registration.version}"/>
    <property name="web_registration.jar"
              value="${tcs_libdir}/${web_registration.path}/${web_registration.jar.name}"/>

    <property name="web_site_statistics.version" value="1.0"/>
    <property name="web_site_statistics.jar.name" value="web_site_statistics.jar"/>
    <property name="web_site_statistics.path"
              value="web_site_statistics/${web_site_statistics.version}"/>
    <property name="web_site_statistics.jar"
              value="${tcs_libdir}/${web_site_statistics.path}/${web_site_statistics.jar.name}"/>

    <property name="web_spider.version" value="1.0"/>
    <property name="web_spider.jar.name" value="web_spider.jar"/>
    <property name="web_spider.path" value="web_spider/${web_spider.version}"/>
    <property name="web_spider.jar" value="${tcs_libdir}/${web_spider.path}/${web_spider.jar.name}"/>

    <property name="xsl_engine.version" value="1.0.1"/>
    <property name="xsl_engine.jar.name" value="xsl_engine.jar"/>
    <property name="xsl_engine.path" value="xsl_engine/${xsl_engine.version}"/>
    <property name="xsl_engine.jar" value="${tcs_libdir}/${xsl_engine.path}/${xsl_engine.jar.name}"/>
	
    <!-- 3rd Party Dependencies  -->
    <property name="servlet.jar" value="${ext_libdir}/j2ee/1.4/javax.servlet.jar"/>
    <property name="jsp.jar" value="${ext_libdir}/j2ee/1.4/javax.servlet.jsp.jar"/>
    <property name="j2ee.jar" value="${ext_libdir}/j2ee/1.4/jboss-j2ee.jar"/>
    <property name="mail.jar" value="${ext_libdir}/j2ee/1.4/mail.jar"/>
    <property name="jstl.jar" value="${ext_libdir}/jstl/1.1/jstl.jar"/>
    <property name="jstl-standard.jar" value="${ext_libdir}/jstl/1.1/standard.jar"/>
    <property name="jai-core.jar" value="${ext_libdir}/jai/1.1.3/jai_core.jar"/>
    <property name="jai-codec.jar" value="${ext_libdir}/jai/1.1.3/jai_codec.jar"/>
    <property name="jtidy.jar" value="${ext_libdir}/jtidy/1.3/Tidy.jar"/>
    <property name="mssql.jar" value="${ext_libdir}/mssql/1.1/sqljdbc.jar"/>
	
	<!-- TC Dependencies  -->
	<property name="shared.jar" value="${tc_libdir}/shared.jar"/>
	<property name="tcwebcommon.jar" value="${tc_libdir}/tcwebcommon.jar"/>

    <!-- The libraries to be used in production -->
    <path id="buildlibs">
        <pathelement location="${authorization.jar}"/>
        <pathelement location="${administration_logic.jar}"/>
        <pathelement location="${administration_persistence.jar}"/>
        <pathelement location="${auction_logic.jar}"/>
        <pathelement location="${auction_framework.jar}"/>
        <pathelement location="${auction_persistence.jar}"/>
        <pathelement location="${base_exception.jar}"/>
        <pathelement location="${base64_codec.jar}"/>
        <pathelement location="${bloom_filter.jar}"/>
        <pathelement location="${class_associations.jar}"/>
        <pathelement location="${command_line_utility.jar}"/>
        <pathelement location="${compression_utility.jar}"/>
        <pathelement location="${configuration_manager.jar}"/>
        <pathelement location="${credit_card_validation.jar}"/>
        <pathelement location="${data_validation.jar}"/>
        <pathelement location="${db_connection_factory.jar}"/>
        <pathelement location="${database_abstraction.jar}"/>
        <pathelement location="${document_generator.jar}"/>
        <pathelement location="${data_paging_tag.jar}"/>
        <pathelement location="${drop_down_manager.jar}"/>
        <pathelement location="${email_address_validator.jar}"/>
        <pathelement location="${email_confirmation.jar}"/>
        <pathelement location="${email_engine.jar}"/>
        <pathelement location="${encryption.jar}"/>
    	<pathelement location="${file_system_server.jar}"/>
        <pathelement location="${file_upload.jar}"/>
        <pathelement location="${form_validator.jar}"/>
        <pathelement location="${front_controller.jar}"/>
        <pathelement location="${forgot_password.jar}"/>
        <pathelement location="${game_handlers_logic.jar}"/>
        <pathelement location="${game_operation_logic.jar}"/>
        <pathelement location="${game_interface_logic.jar}"/>
        <pathelement location="${game_persistence.jar}"/>
        <pathelement location="${generic_event_manager.jar}"/>
    	<pathelement location="${heartbeat.jar}"/>
        <pathelement location="${html_parser.jar}"/>
        <pathelement location="${id_generator.jar}"/>
        <pathelement location="${image_manipulation.jar}"/>
        <pathelement location="${guid_generator.jar}"/>
        <pathelement location="${hashing_utility.jar}"/>
        <pathelement location="${http_utility.jar}"/>
    	<pathelement location="${ip_server.jar}"/>
        <pathelement location="${jndi_utility.jar}"/>
        <pathelement location="${json_object.jar}"/>
        <pathelement location="${jigsaw_puzzle.jar}"/>
        <pathelement location="${letter_scramble_puzzle.jar}"/>
        <pathelement location="${logging_wrapper.jar}"/>
        <pathelement location="${lightweight_xml_parser.jar}"/>
        <pathelement location="${memory_usage.jar}"/>
        <pathelement location="${messenger_framework.jar}"/>
        <pathelement location="${missing_letter_puzzle.jar}"/>
        <pathelement location="${object_factory.jar}"/>
        <pathelement location="${object_formatter.jar}"/>
        <pathelement location="${password_validator.jar}"/>
        <pathelement location="${puzzle_framework.jar}"/>
        <pathelement location="${random_string_generator.jar}"/>
        <pathelement location="${random_string_image.jar}"/>
        <pathelement location="${rss_generator.jar}"/>
        <pathelement location="${registration_data_validation.jar}"/>
        <pathelement location="${rest_context_builder.jar}"/>
        <pathelement location="${rest_service.jar}"/>
        <pathelement location="${simple_cache.jar}"/>
        <pathelement location="${site_validation.jar}"/>
        <pathelement location="${sliding_tile_puzzle.jar}"/>
        <pathelement location="${spell_check.jar}"/>
        <pathelement location="${search_builder.jar}"/>
        <pathelement location="${string_distance.jar}"/>
        <pathelement location="${stoppable_thread.jar}"/>
        <pathelement location="${sync_proc_wrapper.jar}"/>
        <pathelement location="${typesafe_enum.jar}"/>
        <pathelement location="${url_loader.jar}"/>
        <pathelement location="${user_logic_persistence.jar}"/>
        <pathelement location="${user_profile.jar}"/>
        <pathelement location="${user_profile_manager.jar}"/>
        <pathelement location="${web_application_user_logic.jar}"/>
        <pathelement location="${web_site_statistics.jar}"/>
        <pathelement location="${web_spider.jar}"/>
        <pathelement location="${web_registration.jar}"/>
        <pathelement location="${xsl_engine.jar}"/>
        <pathelement location="${string_class.jar}"/>

        <pathelement location="${j2ee.jar}"/>
        <pathelement location="${mail.jar}"/>
        <pathelement location="${servlet.jar}"/>
        <pathelement location="${jsp.jar}"/>
        <pathelement location="${jstl.jar}"/>
        <pathelement location="${jstl-standard.jar}"/>
        <pathelement location="${jtidy.jar}"/>
        <pathelement location="${jai-core.jar}"/>
        <pathelement location="${jai-codec.jar}"/>
    	
    	<pathelement location="${shared.jar}"/>
    	<pathelement location="${tcwebcommon.jar}"/> 
    	
    	<pathelement location="${jive_libdir}/jivebase.jar"/>
    	<pathelement location="${jive_libdir}/jiveforums.jar"/>
    	<pathelement location="${jive_libdir}/xwork.jar"/>
    	<pathelement location="${jive_libdir}/htmlparser.jar"/>
    </path>

    <!-- The additional libraries for JWebUnit 1.3 framework utilized for testing purposes -->
    <path id="jwebunit.classpath">
        <pathelement location="${ext_libdir}/jwebunit/1.3/avalon-framework-4.1.3.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/commons-codec-1.3.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/commons-collections-3.2.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/commons-httpclient-3.0.1.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/commons-io-1.2.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/commons-lang-2.1.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/commons-logging-1.1.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/htmlunit-1.9.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/icu4j-2.6.1.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/jaxen-1.1-beta-9.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/jdom-1.0.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/js-1.6R2.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/junit-3.8.2.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/log4j-1.2.12.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/logkit-1.0.1.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/nekohtml-0.9.5.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/regexp-1.3.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/tagsoup-0.9.7.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/xalan-2.6.0.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/xercesImpl-2.6.2.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/xml-apis-1.0.b2.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/xmlParserAPIs-2.6.2.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/xom-1.0b3.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/jwebunit-core-1.3.jar"/>
        <pathelement location="${ext_libdir}/jwebunit/1.3/jwebunit-htmlunit-plugin-1.3.jar"/>
    </path>

    <!-- A classpath combining production and testing code and libraries -->
    <path id="test.build.classpath">
        <pathelement location="${build_testclassdir}"/>
        <pathelement location="${build_classdir}"/>
        <path refid="jwebunit.classpath"/>
        <path refid="buildlibs"/>
    </path>

    <!-- A classpath including the production code and libraries only -->
    <path id="runtime.classpath">
        <pathelement location="${build_classdir}"/>
        <path refid="buildlibs"/>
    </path>

	<target name="init">
		<mkdir dir="${build_distdir}"/>
		<mkdir dir="${build_ejbjarsdir}"/>
    </target>
	
    <!-- Compile production code -->
    <target name="compile" depends="init">
        <mkdir dir="${build_classdir}"/>
        <javac srcdir="${javamain}" destdir="${build_classdir}" includes="**/*.java" excludes="topcoder/**/*.java" 
        	debug="true" verbose="${verbose}">
            <classpath refid="buildlibs"/>
        </javac>
    </target>

    <!-- Compile testing code -->
    <target name="compile_tests" depends="compile">
        <mkdir dir="${build_testclassdir}"/>
        <javac srcdir="${javatests}" destdir="${build_testclassdir}" includes="**/*.java" debug="true"
               verbose="${verbose}">
            <classpath refid="test.build.classpath"/>
        </javac>
    </target>
	
	<!-- Compile forums code
		 TODO: Replace /common, /shared, and /web/common with shared.jar, tcwebcommon.jar when 1.5 is supported. -->
	<!--
	<target name="compile_shared">
		<javac srcdir="${javamain}" destdir="${build_classdir}" debug="true" verbose="${verbose}">
			<classpath refid="buildlibs"/>
			<include name="com/topcoder/shared/**"/>
        </javac>
        <rmic classname="com.topcoder.shared.distCache.CacheClientImpl" base="${build_classdir}"/>
        <rmic classname="com.topcoder.shared.distCache.CacheServerSyncImpl" base="${build_classdir}"/>
    </target>
    -->
	
	<target name="compile_forums">
        <javac srcdir="${javamain}" destdir="${build_classdir}" debug="true" verbose="${verbose}">
        	<classpath refid="buildlibs"/>
        	<!-- <include name="com/topcoder/shared/**"/>
        	<include name="com/topcoder/common/**"/>
        	<include name="com/topcoder/web/common/**"/> -->
        	<include name="com/topcoder/web/forums/**"/>
            <include name="com/topcoder/web/ejb/forums/**"/>
            <include name="com/topcoder/web/ejb/messagehistory/**"/>
        </javac>
		<!-- <rmic classname="com.topcoder.shared.distCache.CacheClientImpl" base="${build_classdir}"/>
		<rmic classname="com.topcoder.shared.distCache.CacheServerSyncImpl" base="${build_classdir}"/> -->
    </target>
	
	<!-- JBoss EJBs -->
    <target name="package_EJB_MessageHistoryBean" depends="compile_forums">
        <jar jarfile="${build_ejbjarsdir}/messagehistory.jar">
            <zipfileset dir="${build_classdir}" includes="com/topcoder/web/ejb/BaseEJB.class"/>
            <zipfileset dir="${build_classdir}" includes="com/topcoder/web/ejb/messagehistory/*.class"/>
            <metainf dir="${javamain}/com/topcoder/web/ejb/messagehistory" includes="*.xml"/>
        </jar>
    </target>

    <target name="package_EJB_ForumsBean" depends="compile_forums">
        <jar jarfile="${build_ejbjarsdir}/forums.jar">
            <zipfileset dir="${build_classdir}" includes="com/topcoder/web/ejb/BaseEJB.class"/>
            <zipfileset dir="${build_classdir}" includes="com/topcoder/web/ejb/forums/*.class"/>
            <metainf dir="${javamain}/com/topcoder/web/ejb/forums" includes="*.xml"/>
        </jar>
    </target>

    <target name="package_TCJive" depends="compile_forums">
        <jar jarfile="${build_ejbjarsdir}/tcjive.jar">
            <fileset dir="${build_classdir}/">
                <include name="com/topcoder/web/forums/model/TCUser.class"/>
                <include name="com/topcoder/web/forums/model/TCUserManager.class"/>
                <include name="com/topcoder/web/forums/model/Common.class"/>
                <include name="com/topcoder/web/forums/model/TCAuthFactory.class"/>
                <include name="com/topcoder/web/forums/model/TCAuthToken.class"/>
                <include name="com/topcoder/web/forums/util/filter/*.class"/>
            </fileset>
            <fileset dir="${configdir}/forums/filter">
                <include name="**/*.properties"/>
            </fileset>
        </jar>
    </target>
    <!-- End JBoss EJBs -->
	
	<target name="war_forums" depends="compile_forums">
		<delete file="${forums.war}" failonerror="false"/>
        <war destfile="${forums.war}" webxml="${configdir}/forums/WEB-INF/web.xml">
            <fileset dir="${javamain}/com/topcoder/web/forums/view">
                <include name="*.*"/>
            </fileset>
            <fileset dir="${javamain}/com/topcoder/web/jsp">
                <include name="body_top.jsp"/>
                <include name="calendar.jsp"/>
                <include name="date_time.jsp"/>
                <include name="errorPage.jsp"/>
                <include name="foot.jsp"/>
                <include name="menu.jsp"/>
                <include name="page_title.jsp"/>
                <include name="public_right.jsp"/>
                <include name="script.jsp"/>
                <include name="style.jsp"/>
                <include name="top.jsp"/>
                <include name="includes/global_left.jsp"/>
                <include name="includes/modules/simpleSearch.jsp"/>
            </fileset>
            <classes dir="${build_classdir}">
                <include name="com/topcoder/web/forums/**/*.class"/>
            </classes>
            <webinf dir="${configdir}/forums/taglib">
                <include name="tc-webtags.tld"/>
                <include name="nav.tld"/>
            </webinf>
            <webinf dir="${configdir}/forums/WEB-INF">
                <include name="jboss-web.xml"/>
            </webinf>
            <!-- <lib dir="${jars.dir}">
                <include name="object_formatter.jar"/>
            </lib> // not needed? -->
        </war>
    </target>
	
    <!-- Build Orpheus Game Server application's WAR archive -->
    <target name="dist" depends="clean,compile">
        <!-- Build the JAR with Game Server classes -->
        <delete file="${build_distdir}/${distfilename}.jar" failonerror="false"/>
        <jar jarfile="${build_distdir}/${distfilename}.jar" basedir="${build_classdir}"/>
        <jar basedir="${configdir}" jarfile="${build_distdir}/${distfilename}.jar" update="true" includes="com/**"
            excludes="com/orpheus/game/server/front/**"/>
        <jar basedir="${configdir}" jarfile="${build_distdir}/${distfilename}.jar" update="true"
             includes="BloomFilterEnvConfig.xml"/>
    	
        <!-- Update EJB JARs with manifest specific to Auction Module -->
        <jar basedir="${configdir}/ejb" jarfile="${tcs_libdir}/game_persistence/1.0/GameDataEJB.jar" update="true"
             manifest="${configdir}/ejb/manifest.mf" excludes="**"/>
        <jar basedir="${configdir}/ejb" jarfile="${tcs_libdir}/administration_persistence/1.0/AdminDataEJB.jar" update="true"
             manifest="${configdir}/ejb/manifest.mf" excludes="**"/>
        <jar basedir="${configdir}/ejb" jarfile="${tcs_libdir}/administration_persistence/1.0/MessageEJB.jar" update="true"
             manifest="${configdir}/ejb/manifest.mf" excludes="**"/>
        <jar basedir="${configdir}/ejb" jarfile="${tcs_libdir}/user_logic_persistence/1.0/UserLogicEJB.jar" update="true"
             manifest="${configdir}/ejb/manifest.mf" excludes="**"/>
        <jar basedir="${configdir}/ejb" jarfile="${tcs_libdir}/auction_persistence/1.0/AuctionEJB.jar" update="true"
             manifest="${configdir}/ejb/manifest.mf" excludes="**"/>
    	
        <!-- Build Game Server WAR archive -->		
        <delete file="${component.war}" failonerror="false"/>
        <war destfile="${component.war}" webxml="${webdir}/WEB-INF/web.xml">
            <webinf dir="${webdir}/WEB-INF" includes="*.tld,*.xml" excludes="web.xml"/>
            <lib file="${jstl.jar}"/>
            <lib file="${jstl-standard.jar}"/>
            <fileset dir="${webdir}" includes="**" excludes="WEB-INF/*.xml"/>
        </war>

        <!-- Build application's EAR archive -->
        <copy todir="${build_distdir}" flatten="true" overwrite="true">
            <fileset dir="${tcs_libdir}" includes="**/*.jar"/>
        </copy>
        <copy todir="${build_distdir}" flatten="true" overwrite="true">
            <fileset dir="${ext_libdir}" includes="**/Tidy.jar"/>
            <fileset dir="${ext_libdir}" includes="**/sqljdbc.jar"/>
            <fileset dir="${ext_libdir}" includes="**/jai_core.jar"/>
            <fileset dir="${ext_libdir}" includes="**/jai_codec.jar"/>
        </copy>
    	<ear destfile="${component.ear}" appxml="${configdir}/application.xml" basedir="${build_distdir}" update="false"
             duplicate="fail" filesonly="true">
        </ear>
    </target>

	<!-- Deploy forum files -->
	<!-- Create forums.war.	 
	
		 // LoginHandler.xml: vaildateUserProfile()
		 request.getSession(true).setAttribute(PROFILE_SESSION_KEY, userProfile);	// "user_profile"
		
		 Confirm cache.properties is needed. -->
    <target name="dist_forums" depends="">
    	<antcall target="war_forums"/>
    	<antcall target="package_TCJive"/>
    	<antcall target="package_EJB_MessageHistoryBean"/>
    	<antcall target="package_EJB_ForumsBean"/>
    	
        <copy todir="${jboss_conf}">
        	<fileset dir="${configdir}/forums">
        		<include name="*.*"/>
        	</fileset>
        </copy>  

    	<ear destfile="${component.ear}" appxml="${configdir}/application.xml" update="true"
             duplicate="fail" filesonly="true">
    		<fileset dir="${tc_libdir}" includes="*.jar,*.war"/>
        	<fileset dir="${jive_libdir}" includes="*.jar,*.war"/>
    		<fileset dir="${build_ejbjarsdir}" includes="*.jar,*.war"/>
        </ear>
    	
    	<!-- <copy todir="${jboss_lib}" file="${build_ejbjarsdir}/tcjive.jar"/> // trying to keep it in EAR temporarily - change if needed -->
        <!-- <copy todir="${jboss_deploy}" file="${ear.dir}/security.ear"/> // not needed? -->
    </target>

    <!-- Generate Javadoc documentation -->
    <target name="javadoc" depends="compile">
        <mkdir dir="${dist_javadocs}"/>
        <javadoc packagenames="${package}.*" sourcepath="${javamain}" classpath="${build_classdir}"
                 classpathref="buildlibs" destdir="${dist_javadocs}" windowtitle="Topcoder Software"
                 header="&lt;table border=0 cellpadding=0 cellspacing=2&gt;&lt;tr&gt;&lt;td&gt;&lt;font class=tcoder2&gt;&#091; &lt;/font&gt;&lt;font class=tcoder1&gt;TOP&lt;/font&gt;&lt;font class=tcoder2&gt;CODER &lt;/font&gt;&lt;font class=tcoder2&gt;&#093;&lt;/font&gt;&lt;/td&gt;&lt;td&gt;&lt;font class=tcoder4&gt;&#153;&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=tcoder3 align=center&gt;&lt;font class=tcoder3&gt;SOFTWARE&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;"
                 footer="&lt;table border=0 cellpadding=0 cellspacing=2&gt;&lt;tr&gt;&lt;td&gt;&lt;font class=tcoder2&gt;&#091; &lt;/font&gt;&lt;font class=tcoder1&gt;TOP&lt;/font&gt;&lt;font class=tcoder2&gt;CODER &lt;/font&gt;&lt;font class=tcoder2&gt;&#093;&lt;/font&gt;&lt;/td&gt;&lt;td&gt;&lt;font class=tcoder4&gt;&#153;&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=tcoder3 align=center&gt;&lt;font class=tcoder3&gt;SOFTWARE&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;"
                 bottom="&lt;font class=tcoder5&gt;Contact TopCoder Software at &lt;a href='http://www.topcodersoftware.com'&gt;www.topcodersoftware.com&lt;/a&gt;&lt;/font&gt;"
                 stylesheetfile="${javadocsdir}/stylesheet.css" verbose="${verbose}">
            <tag name="copyright" description="Copyright:" scope="types"/>
        </javadoc>
    </target>

    <!-- Delete compiled production and testing classes and application's WAR archive -->
    <target name="clean">
        <delete dir="${builddir}"/>
    </target>

    <!-- Deploy Orpheus Game Server application to JBoss -->
    <target name="deploy" depends="clean,dist,dist_forums">
        <mkdir dir="${global_conf_dir}" description="Create a directory for global configuration files"/>
        <delete dir="${global_conf_dir}/com" failonerror="true"/>
        <copydir src="${configdir}/com/orpheus/game/server/front" dest="${global_conf_dir}/com/orpheus/game/server/front"/>
        <copy file="${configdir}/com/orpheus/game/server/PuzzleTypeSource.xml" todir="${global_conf_dir}" flatten="false"/>
        <copy file="${configdir}/com/orpheus/game/server/RESTContextBuilder.xml" todir="${global_conf_dir}" flatten="false"/>
        <copy file="${configdir}/com/orpheus/game/server/FormValidation.xml" todir="${global_conf_dir}" flatten="false"/>
        <copy file="${configdir}/com/orpheus/game/server/ValidationConfiguration.dtd" todir="${global_conf_dir}" flatten="false"/>
        <copy file="${configdir}/com/orpheus/game/server/RandomStringImage.xml" todir="${global_conf_dir}" flatten="false"/>
        <copy file="${configdir}/com/orpheus/game/server/wordlist1.txt" todir="${global_conf_dir}" flatten="false"/>
        <copy file="${configdir}/com/orpheus/game/server/Colors.xml" todir="${global_conf_dir}" flatten="false"/>
        <copy file="${component.ear}" todir="${jboss_deploy}" overwrite="true" flatten="true"/>
    </target>
	
	<!-- Deploy Orpheus Game Server application to JBoss in development; explode game_server.ear -->
    <target name="deploy-dev" depends="clean,dist,dist_forums">
        <mkdir dir="${global_conf_dir}" description="Create a directory for global configuration files"/>
        <delete dir="${global_conf_dir}/com" failonerror="true"/>
        <copydir src="${configdir}/com/orpheus/game/server/front" dest="${global_conf_dir}/com/orpheus/game/server/front"/>
        <copy file="${configdir}/com/orpheus/game/server/PuzzleTypeSource.xml" todir="${global_conf_dir}" flatten="false"/>
        <copy file="${configdir}/com/orpheus/game/server/RESTContextBuilder.xml" todir="${global_conf_dir}" flatten="false"/>
        <copy file="${configdir}/com/orpheus/game/server/FormValidation.xml" todir="${global_conf_dir}" flatten="false"/>
        <copy file="${configdir}/com/orpheus/game/server/ValidationConfiguration.dtd" todir="${global_conf_dir}" flatten="false"/>
        <copy file="${configdir}/com/orpheus/game/server/RandomStringImage.xml" todir="${global_conf_dir}" flatten="false"/>
        <copy file="${configdir}/com/orpheus/game/server/wordlist1.txt" todir="${global_conf_dir}" flatten="false"/>
        <copy file="${configdir}/com/orpheus/game/server/Colors.xml" todir="${global_conf_dir}" flatten="false"/>
    	<unwar src="${component.ear}" dest="${jboss_deploy}/${distfilename}.ear" overwrite="true"/>
    	<delete file="${jboss_deploy}/${distfilename}.ear/${distfilename}.war" failonerror="false"/>
    	<unwar src="${component.war}" dest="${jboss_deploy}/${distfilename}.ear/${distfilename}.war" overwrite="true"/>
    	<delete file="${jboss_deploy}/${distfilename}.ear/forums.war" failonerror="false"/>
    	<unwar src="${forums.war}" dest="${jboss_deploy}/${distfilename}.ear/forums.war" overwrite="true"/>
    </target>

    <target name="main" depends="deploy">
    </target>

</project>
