Hi kaqi072821,

The list of changes:

1. Throw new PersistenceException on compVersion.getComponent == null. (as it's persistence error if there is a version
   without component). 

2. Checking for class and ISE/IAE added to getAll* methods (failure test pass).
3. Update of version in updateAsset method. Appropriate tests were added (7 tests to UnitTest suite).
   Regarding this three of failure tests were altered with line
     newAsset.setVersionId(null);
   as version's attributes ignored when version id is null (and checked if they are not, see my 
   CatalogServiceImplUpdateComponentIllegalArgumentsTest).
4. 2.1.1 declaring interface's method 'public' is absolutely unneccessary, they are implicitely public.
5. if (entityComponent == null) {
        throw new EntityNotFoundException("AssetDTO with id=" + assetId + " not found");
   }
   is introduced as a separate method.
6. 2007->2008
7. 3.1.6 - catching Exception on rollback replaced to catching javax.persistence.PersistenceException,
           while catching RuntimeException and wrapping it to EJBException is OK here (EJB container does the 
           same thing, and this is an emulator).
8. CatalogServiceImplBaseTest doc written.

The fix was tested againts mocks and real application both.

Regards,
Eugene Retunsky.

P.S. Final fix 2 - new method introduced persistEntity&mergeEntity (at the bottom of CatalogServicesImpl)