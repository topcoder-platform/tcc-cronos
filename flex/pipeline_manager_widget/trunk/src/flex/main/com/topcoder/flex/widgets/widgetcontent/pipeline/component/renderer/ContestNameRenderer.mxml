<?xml version="1.0" encoding="utf-8"?>
<!--
     Copyright (C) 2009 TopCoder Inc., All Rights Reserved.
-->

<!--
     A renderer for wiki link/icon.
     
     @author snow01
     @since Pipeline Conversion Cockpit Integration Assembly 1 v1.0
     @version 1.0
-->
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml"
         paddingLeft="15"
         verticalScrollPolicy="off"
         horizontalScrollPolicy="off"
         horizontalAlign="center"
         verticalAlign="top">
    <mx:Script>
        <![CDATA[
            import com.topcoder.flex.widgets.model.IWidget;
            import com.topcoder.flex.Helper;
            import flash.net.navigateToURL;
            import com.topcoder.flex.widgets.widgetcontent.pipeline.vo.Detail;
            import flash.utils.Dictionary;
            
            [Bindable]
            private var detail:Detail;
            
            override public function set data(value:Object):void {
                super.data=value;
                if (data is Detail) {
                    detail=data as Detail;
                }
            }
            
            public function openContest():void {
                var mode:String="";
        			
        		if(detail.cperm=="contest_full" 
        			    || detail.cperm=="contest_write"
            		    || (detail.cperm==null && 
            			        (detail.pperm=="project_full" 
            				        || detail.pperm=="project_write"))) {
                    mode="WRITE";				                
                } else if (detail.cperm=="contest_read" || (detail.cperm==null && detail.pperm=="project_read")) {
                    mode="READ"
                }
                    
                if (!mode || mode == "") {
                    Helper.showAlertMessage("Sorry, you do not have permission to view this contest");
                    return;
                } 
                
                var widget:IWidget=detail.widgetFramework.getWidget("Launch Contests", "Launch Contest");
        		var props:Dictionary=new Dictionary();
        		props["contestType"]=detail.type;
        		props["contestid"]=detail.contestId;
        		props["projectid"]=detail.projectId;
        		props["projectName"]=detail.project;
        		props["mode"]=mode;
        			
        		widget.setAttributes(props);
        		detail.widgetFramework.openWidget("Launch Contests", "Launch Contest");
            }
        ]]>
    </mx:Script>
    <mx:LinkButton id="wiki"
                   styleName="linkBtn"
                   label="{detail.name}"
                   click="openContest()"/>
</mx:VBox>
