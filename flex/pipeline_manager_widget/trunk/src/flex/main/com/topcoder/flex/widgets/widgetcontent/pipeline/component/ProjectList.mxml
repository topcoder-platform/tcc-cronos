<?xml version="1.0" encoding="utf-8"?>
<!--
     Copyright (C) 2009 TopCoder Inc., All Rights Reserved.
-->

<!--
     The project list view.
     
     @author snow01
     @since Pipeline Conversion Cockpit Integration Assembly 1 v1.0
     @version 1.0
-->
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml"
         creationComplete="init()"
         verticalGap="0"
         verticalScrollPolicy="off">
    <mx:Script>
        <![CDATA[
            import com.topcoder.flex.widgets.widgetcontent.pipeline.model.Model;
            
            [Bindable]
            private var model:Model;
            
            [Bindable]
            private var open:Boolean=false;
            
            public function set puid(value:String):void {
                model=Model.getInstance(value);
            }
            
            private function handleClick():void {
                
                open=!open;
                winCtrlBut.source=(open) ? model.winMin : model.winMax;
                
                shower.includeInLayout=shower.visible=open;
            }
            
            private function init():void {
                //lb1.text = "(Hold down \"Control\" to select more than one)";
            }
            
            private function convertName(input:String):String {
                switch (input) {
                    case "manager":
                        return "Manager Name";
                    case "arch":
                        return "Architects Name";
                    case "reviewer":
                        return "Reviewers Name";
                    case "specer":
                        return "Salesperson Name";
                }
                return "";
            }
        ]]>
    </mx:Script>
    <mx:HBox styleName="titleBar"
             width="100%"
             height="27"
             backgroundSize="100%"
             id="title"
             paddingTop="0"
             paddingBottom="0"
             paddingLeft="20"
             paddingRight="0"
             verticalScrollPolicy="off"
             horizontalScrollPolicy="off">
        <mx:Image width="16"
                  height="16"
                  id="winCtrlBut"
                  click="handleClick()"
                  source="{model.winMax}"
                  buttonMode="true"
                  useHandCursor="true"/>
        <mx:Label text="List of persons that have scheduled contests"
                  id="lb"
                  styleName="nameLabel"/>
        <mx:Spacer width="100%"/>
    </mx:HBox>
    <mx:VBox width="100%"
             height="100%"
             id="shower"
             includeInLayout="false"
             visible="false"
             verticalGap="0">
        <mx:HBox width="100%"
                 horizontalAlign="right"
                 verticalAlign="middle">
            <mx:Button styleName="btn"
                       label="Show Manager"
                       click="model.updateRole('manager')"
                       visible="{model.role != 'manager'}"
                       includeInLayout="{model.role != 'manager'}"/>
            <mx:Button styleName="btn"
                       label="Show Architects"
                       click="model.updateRole('arch')"
                       visible="{model.role != 'arch'}"
                       includeInLayout="{model.role != 'arch'}"/>
            <mx:Button styleName="btn"
                       label="Show Reviewers"
                       click="model.updateRole('reviewer')"
                       visible="{model.role != 'reviewer'}"
                       includeInLayout="{model.role != 'reviewer'}"/>
            <mx:Button styleName="btn"
                       label="Show Salesperson"
                       click="model.updateRole('specer')"
                       visible="{model.role != 'specer'}"
                       includeInLayout="{model.role != 'specer'}"/>

        </mx:HBox>
        <mx:DataGrid id="grid"
                     width="100%"
                     borderStyle="solid"
                     borderSides="left top right"
                     verticalGridLines="false"
                     wordWrap="true"
                     styleName="grid"
                     headerHeight="30"
                     verticalScrollPolicy="off"
                     horizontalScrollPolicy="off"
                     rowHeight="35"
                     headerColors="[#575657, #101010]"
                     dataProvider="{model.pList}"
                     rowCount="{model.pList.length}">
            <mx:columns>
                <mx:DataGridColumn width="350"
                                   sortable="true"
                                   headerText="{convertName(model.role)}"
                                   paddingLeft="10"
                                   headerStyleName="headerStyle2"
                                   itemRenderer="com.topcoder.flex.widgets.widgetcontent.pipeline.component.renderer.ResourceTabRenderer"/>
                <mx:DataGridColumn width="180"
                                   sortable="true"
                                   headerText="Scheduled"
                                   paddingLeft="10"
                                   headerStyleName="headerStyle2"
                                   dataField="scheduled"/>
                <mx:DataGridColumn width="150"
                                   sortable="true"
                                   headerText="Posted"
                                   paddingLeft="10"
                                   headerStyleName="headerStyle2"
                                   dataField="posted"/>
            </mx:columns>
        </mx:DataGrid>
    </mx:VBox>
</mx:VBox>
