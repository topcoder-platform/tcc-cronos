<?xml version="1.0" encoding="utf-8"?>
<!--
     Copyright (C) 2009 TopCoder Inc., All Rights Reserved.
-->

<!--
     The date picker.
     
     @author snow01
     @since Pipeline Conversion Cockpit Integration Assembly 1 v1.0
     @version 1.0
-->
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml"
         width="134"
         paddingLeft="0"
         paddingRight="0"
         paddingTop="0"
         paddingBottom="0">
    <mx:Script>
        <![CDATA[
            import mx.formatters.Formatter;
            
            public function get value():Date {
                var tmp:String=txt.text.replace(/-/g, "/");
                
                var d:Date=new Date(tmp);
                if (d) {
                    return d;
                } else {
                    return null;
                }
            }
            
            [Bindable]
            public var date:Date;
            
            public function handleChange():void {
                txt.text=formater.format(chooser.selectedDate);
                btn.selected=false;
            }
            
            public function set setTxt(value:Date):void {
                var txts:String=formater.format(value);
                if (txts && txts.length > 0 && txts.search("NaN") < 0) {
                    txt.text=txts;
                }
            }
        ]]>
    </mx:Script>
    <mx:Binding source="date"
                destination="setTxt"/>
    <mx:DateFormatter id="formater"
                      formatString="MM-DD-YYYY"/>
    <mx:HBox width="100%"
             horizontalGap="2"
             verticalAlign="middle"
             paddingLeft="0"
             paddingRight="0"
             paddingTop="0"
             paddingBottom="0">
        <mx:TextInput styleName="txtInput"
                      width="118"
                      id="txt"
                      editable="true"/>
        <mx:Button styleName="selectorBtn"
                   toggle="true"
                   id="btn"
                   selected="false"/>
    </mx:HBox>
    <mx:DateChooser id="chooser"
                    includeInLayout="false"
                    visible="{btn.selected}"
                    change="handleChange()"/>
</mx:VBox>
